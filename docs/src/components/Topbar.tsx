import { useLocation, useNavigate } from 'react-router-dom';
import { AnimatePresence, motion } from 'motion/react';
import { BookOpenText, Coffee, Github } from 'lucide-react';
import { useResponsive } from '../hooks/useResponsive';
export default function Topbar() {
  const isMobile = useResponsive();
  const navigate = useNavigate();
  const location = useLocation();
  const isHome = location.pathname === '/';
  const redirectToPath = (redirectTo: string) => {
    if (redirectTo.includes('http')) {
      window.open(redirectTo, '_blank');
    } else {
      navigate(redirectTo);
    }
  };
  console.log(isMobile, 'is Mobile');
  return (
    <section id="Nav" className="top-0 left-0 z-1 fixed flex justify-center items-center w-full">
      <motion.nav
        initial={{
          y: -100,
          width: isMobile ? '100%' : '50%',
          borderRadius: 'calc(infinity * 1px)',
          marginTop: 5,
        }}
        animate={{
          y: 0,
          width: isMobile ? '100%' : isHome ? '50%' : '100%',
          borderRadius: isMobile ? 0 : isHome ? 'calc(infinity * 1px)' : 0,
          marginTop: isMobile ? 0 : isHome ? 10 : 0,
          borderWidth: isHome ? '2px 2px' : '0px 0px 2px 0px',
        }}
        className={`flex md:flex-row flex-col justify-between items-center bg-white-200/5 backdrop-blur-sm px-[0.5%] py-2 border-accent-blue/5 rounded-full overflow-hidden ${isHome ? 'flex-row' : ''}`}
      >
        <button
          onClick={() => redirectToPath('/')}
          className={`flex  md:justify-start justify-center items-center gap-2  px-2  rounded-full     text-xl cursor-pointer group  w-full md:w-1/2`}
        >
          <Logo className="-mb-0.5 size-9 group-active:scale-95 group-hover:scale-[110%] transition-all duration-300 ease-in-out text-accent-blue" />
          <span className="ml-2 text-xl"> Motion On Native</span>
        </button>

        <AnimatePresence>
          {isHome ? (
            <motion.button
              initial={{ opacity: 0, scale: 0.8, x: 120 }}
              animate={{ opacity: 1, scale: 1, x: 0 }}
              exit={{ opacity: 0, scale: 0, x: 120 }}
              transition={{
                type: 'spring',
                stiffness: 260,
                damping: 30,
              }}
              onClick={() => redirectToPath('/docs')}
              className="flex justify-center items-center gap-2 bg-transparent hover:bg-white-200/80 px-4 py-1.5 rounded-full text-white-200 hover:text-black-800 text-xl active:scale-95 transition-all duration-300 ease-in-out cursor-pointer space-grotesk"
            >
              <BookOpenText className="-mb-0.5 size-5" />
              <span>Docs</span>
            </motion.button>
          ) : (
            <motion.span
              initial={{ opacity: 0, scale: 0.8, x: 120 }}
              animate={{ opacity: 1, scale: 1, x: 0 }}
              exit={{ opacity: 0, scale: 0, x: 120 }}
              transition={{
                type: 'spring',
                stiffness: 260,
                damping: 30,
                delay: 0.3,
              }}
              className="flex justify-center md:justify-end gap-3 mt-1.5 md:mt-0 w-full md:w-1/2"
            >
              <button
                onClick={() => redirectToPath('https://github.com/mohd-Bilal-exe/motion-on-native')}
                className="flex justify-center items-center gap-1 bg-transparent hover:bg-black-800 px-4 rounded-full text-white-200/30 hover:text-white-100 text-lg transition-all ease-in-out cursor-pointer"
              >
                <Github className="size-4" />
                <span>Github</span>
              </button>
              <button
                onClick={() => redirectToPath('https://buymeacoffee.com/mohammad.bilal.exe')}
                className="flex justify-center items-center gap-1 bg-transparent hover:bg-white-200 px-4 rounded-full text-md text-white-200/30 hover:text-black-850 transition-all ease-in-out cursor-pointer"
              >
                <Coffee className="size-4" />
                <span>Buy me a coffee</span>
              </button>
            </motion.span>
          )}
        </AnimatePresence>
      </motion.nav>
    </section>
  );
}

export const Logo = ({ className = 'size-10' }: { className?: string }) => {
  return (
    <div className={className}>
      <svg className="size-full" viewBox="53.158 141.947 274.743 160.964">
        <path
          fill="currentColor"
          d="M 213.688 151.467 C 210.604 150.984 207.481 151 204.414 151.637 C 198.283 152.914 193.536 156.451 190.222 161.06 C 186.908 165.67 184.791 171.485 183.658 178.221 C 183.222 180.818 182.984 183.589 182.853 186.442 C 178.951 186.537 175.161 186.708 171.611 187.025 C 162.396 187.846 154.447 189.387 148.141 191.807 C 141.835 194.225 136.996 197.689 135.241 202.173 C 133.485 206.655 135.144 211.315 138.839 215.566 C 142.531 219.82 148.288 223.878 155.668 227.74 C 158.513 229.227 161.668 230.672 164.98 232.091 C 163.01 234.606 161.191 237.089 159.671 239.485 C 155.732 245.71 153.32 251.469 152.821 256.594 C 152.326 261.721 153.849 266.406 158.224 269.612 C 162.601 272.817 169.003 273.938 176.012 273.581 C 183.018 273.223 190.9 271.466 199.411 268.593 C 202.691 267.485 206.084 266.158 209.531 264.722 C 211.462 267.146 213.433 269.454 215.465 271.536 C 220.732 276.939 226.272 281.156 232.083 283.865 C 237.89 286.572 244.256 287.792 250.387 286.514 C 256.519 285.235 261.264 281.699 264.578 277.089 C 267.893 272.48 270.008 266.665 271.141 259.929 C 271.578 257.332 271.816 254.561 271.951 251.706 C 275.854 251.613 279.642 251.441 283.192 251.126 C 292.404 250.308 300.355 248.765 306.661 246.345 C 312.967 243.926 317.807 240.457 319.562 235.974 C 321.317 231.492 319.659 226.835 315.964 222.583 C 312.27 218.331 306.511 214.273 299.132 210.411 C 296.288 208.923 293.134 207.476 289.827 206.06 C 291.793 203.544 293.61 201.061 295.129 198.663 C 299.069 192.443 301.481 186.68 301.979 181.555 C 302.478 176.428 300.952 171.742 296.576 168.539 C 292.196 165.332 285.796 164.211 278.79 164.568 C 271.781 164.926 263.901 166.684 255.39 169.557 C 252.108 170.667 248.712 171.993 245.267 173.43 C 243.334 171.007 241.364 168.696 239.333 166.613 C 234.066 161.213 228.531 156.993 222.722 154.285 C 219.816 152.931 216.773 151.95 213.685 151.464 L 213.688 151.467 M 211.746 157.436 C 213.676 157.747 215.77 158.409 218.049 159.47 C 222.604 161.595 227.615 165.296 232.479 170.283 C 234.354 172.204 236.197 174.365 238.01 176.646 C 231.084 179.893 223.974 183.726 216.841 188.087 C 207.876 187.083 199.27 186.527 191.195 186.408 C 191.32 183.722 191.536 181.132 191.939 178.734 C 192.986 172.516 194.976 167.355 197.577 163.739 C 200.177 160.124 203.149 158.183 206.414 157.503 C 208.046 157.162 209.814 157.121 211.746 157.436 M 285.99 171.051 C 287.89 171.442 289.395 172.079 290.56 172.934 C 292.89 174.639 294.05 177.338 293.658 181.358 C 293.268 185.379 291.225 190.53 287.587 196.276 C 286.183 198.487 284.482 200.809 282.626 203.175 C 275.546 200.516 267.687 198.051 259.186 195.854 C 256.194 189.637 252.833 183.882 249.209 178.698 C 252.445 177.346 255.623 176.102 258.65 175.081 C 266.509 172.424 273.548 170.937 279.045 170.658 C 281.795 170.517 284.091 170.661 285.99 171.052 L 285.99 171.051 M 241.942 181.935 C 244.52 185.667 246.856 189.492 248.934 193.399 C 245.463 192.635 241.932 191.904 238.299 191.237 C 234.668 190.572 231.076 189.996 227.508 189.469 C 232.163 186.796 236.981 184.283 241.942 181.935 M 235.979 197.162 C 241.718 198.214 247.247 199.406 252.551 200.702 C 254.367 204.692 255.974 208.735 257.373 212.826 C 258.764 216.917 259.941 221.05 260.907 225.217 C 257.026 228.498 252.988 231.675 248.794 234.739 C 244.594 237.805 240.248 240.758 235.758 243.591 C 230.219 242.899 224.56 242.042 218.823 240.99 C 213.233 239.964 207.703 238.781 202.248 237.447 C 200.433 233.457 198.828 229.412 197.43 225.319 C 196.04 221.23 194.861 217.099 193.895 212.93 C 197.777 209.652 201.818 206.476 206.014 203.408 C 210.21 200.345 214.56 197.391 219.046 194.558 C 224.744 195.269 230.392 196.138 235.981 197.162 L 235.979 197.162 M 208.462 193.442 C 205.66 195.308 202.918 197.219 200.232 199.175 C 197.554 201.138 194.937 203.143 192.382 205.188 C 191.7 200.99 191.287 196.763 191.149 192.522 C 196.649 192.618 202.434 192.916 208.462 193.442 M 262.531 203.357 C 267.869 204.883 273.097 206.595 278.197 208.486 C 274.979 212.113 271.535 215.634 267.874 219.035 C 267.155 216.388 266.356 213.756 265.473 211.139 C 264.574 208.526 263.592 205.93 262.531 203.356 L 262.531 203.357 M 182.789 192.544 C 182.942 198.452 183.692 204.748 185.059 211.307 C 179.08 216.521 173.836 221.721 169.385 226.783 C 166.27 225.453 163.318 224.104 160.691 222.73 C 153.88 219.164 148.826 215.491 145.93 212.154 C 143.032 208.82 142.32 206.028 143.254 203.64 C 144.188 201.255 146.843 199.084 151.79 197.187 C 156.737 195.288 163.798 193.839 172.299 193.082 C 175.579 192.789 179.121 192.631 182.789 192.543 L 182.789 192.544 M 285.416 211.366 C 288.533 212.696 291.486 214.047 294.109 215.423 C 300.924 218.988 305.976 222.658 308.874 225.995 C 311.77 229.332 312.484 232.122 311.551 234.505 C 310.616 236.892 307.959 239.065 303.016 240.963 C 298.066 242.86 291.009 244.311 282.504 245.069 C 279.225 245.359 275.682 245.516 272.012 245.603 C 271.858 239.698 271.111 233.4 269.749 226.841 C 275.722 221.628 280.968 216.429 285.419 211.367 L 285.416 211.366 M 232.154 206.933 C 223.082 205.271 213.6 209.357 210.975 216.061 C 208.35 222.768 213.578 229.551 222.649 231.215 C 231.722 232.877 241.206 228.792 243.833 222.087 C 246.456 215.381 241.228 208.597 232.154 206.933 M 262.423 232.96 C 263.107 237.16 263.516 241.385 263.654 245.628 C 258.154 245.531 252.371 245.237 246.343 244.712 C 249.144 242.843 251.886 240.931 254.571 238.974 C 257.251 237.012 259.866 235.005 262.423 232.96 M 186.927 219.117 C 187.648 221.762 188.448 224.396 189.333 227.009 C 190.234 229.623 191.211 232.219 192.272 234.794 C 186.934 233.27 181.706 231.557 176.608 229.664 C 179.826 226.039 183.269 222.52 186.927 219.117 M 172.176 234.977 C 179.256 237.634 187.117 240.096 195.619 242.294 C 198.61 248.515 201.97 254.267 205.594 259.453 C 202.358 260.803 199.185 262.047 196.157 263.071 C 188.297 265.726 181.25 267.216 175.754 267.497 C 170.257 267.776 166.57 266.922 164.242 265.218 C 161.911 263.511 160.757 260.813 161.146 256.793 C 161.536 252.773 163.581 247.622 167.221 241.875 C 168.622 239.661 170.324 237.342 172.176 234.977 M 263.609 251.744 C 263.485 254.426 263.266 257.019 262.864 259.415 C 261.817 265.637 259.828 270.798 257.227 274.414 C 254.628 278.029 251.653 279.97 248.387 280.653 C 245.125 281.332 241.313 280.807 236.754 278.681 C 232.198 276.557 227.191 272.857 222.323 267.868 C 220.45 265.948 218.606 263.783 216.795 261.505 C 223.721 258.257 230.831 254.421 237.966 250.06 C 246.93 251.066 255.534 251.623 263.609 251.744 M 205.866 244.749 C 209.386 245.53 212.936 246.252 216.504 246.913 C 220.08 247.562 223.678 248.151 227.299 248.681 C 222.642 251.352 217.826 253.87 212.861 256.219 C 210.28 252.485 207.947 248.658 205.868 244.749 L 205.866 244.749"
          strokeWidth="3"
          stroke="#4f68cb"
          style={{ strokeWidth: 3, transformOrigin: '227.402px 219.075px' }}
          transform="matrix(0.965926, -0.258819, 0.258819, 0.965926, 0.000002, 0)"
        />
        <path stroke="currentColor" strokeWidth={3} d="M 305.425 85.861 L 306.279 85.861" />
        <path
          stroke="currentColor"
          strokeWidth={3}
          d="M 152.499 283.212 C 124.863 283.212 99.181 284.067 72.191 284.067"
        />
        <path
          stroke="currentColor"
          strokeWidth={3}
          d="M 126.869 232.806 C 118.895 232.806 110.921 232.806 102.947 232.806"
        />
        <path
          stroke="currentColor"
          strokeWidth={3}
          d="M 154.208 178.129 C 135.697 178.129 117.186 178.129 98.676 178.129"
        />
        <path
          stroke="currentColor"
          strokeWidth={3}
          d="M 140.538 260.146 C 116.258 260.146 92.13 260.145 67.92 260.145"
        />
        <path
          stroke="currentColor"
          strokeWidth={3}
          d="M 133.704 202.05 C 114.054 202.05 94.404 202.05 74.754 202.05"
        />
      </svg>
    </div>
  );
};
